/**
{% if out_file %}
 * \file {{ out_file }}
{% endif %}
 * \brief Automatically generated using poly-scribe-code-gen.
{% if author_name %}
 * \author {{ author_name }} {% if author_email %}{{ author_email }}{% endif %}
{% endif +%}
 * \copyright
{% if year and author_name %}
 * Copyright (c) {{ year }}-present {{ author_name }}
{% endif %}
{% if licence %}
 * Distributed under the {{ licence }} licence.
{% endif %}
 */

#pragma once

#include <poly-scribe/poly-scribe.hpp>

// NOLINTBEGIN

namespace {{ package }} {

    // Forward declarations
    {% for struct_name in structs.keys() %}
    struct {{ struct_name }};
    {% endfor %}

    {% for enum_name, enum_data in enums.items() %}
    {% if enum_data.block_comment %}
    {{ enum_data.block_comment|indent -}}
    {% endif %}
    enum class {{ enum_name }} {
        {% for enum_value in enum_data["values"] %}
        {% if enum_value.block_comment %}
        {{ enum_value.block_comment|indent(8) -}}
        {% endif %}
        {{ enum_value.name }}
        {%- if not loop.last %},{% endif +%}
        {% endfor %}
    };
    {%- if not loop.last %}

    {% endif +%}
    {% endfor %}

    {% for def_name, def_data in typedefs.items() %}
    {% if def_data.block_comment %}
    {{ def_data.block_comment|indent -}}
    {% endif %}
    using {{ def_name }} = {{ def_data.type }};
    {% endfor %}

    {% for key, item in inheritance_data.items() %}
    using {{ key }} = rfl::TaggedUnion<"type", {{ item|join(', ') }}>;
    {% endfor %}

    {% for struct_name, struct_data in structs.items() %}
    {% if struct_data.block_comment %}
    {{ struct_data.block_comment|indent -}}
    {% endif %}
    struct {{ struct_name }} {
        {% if struct_data["inheritance"] %}
        // Inherited from {{ struct_data["inheritance"] }}
        {% endif %}
        {% for member_name, member_data in struct_data["members"].items() %}
        {% if member_data.block_comment %}
        {{ member_data.block_comment|indent(8) -}}
        {% endif %}
        {{ member_data.type }} {{ member_name }}{% if member_data.default is not none %} = {% if member_data.default_type %}{{ member_data.default_type }}{% endif %} {{ member_data.default }}{% endif %};
        {% endfor %}
    };
    {%- if not loop.last %}

    {% endif +%}
    {% endfor %}

}  // namespace {{ package }}

// NOLINTEND
