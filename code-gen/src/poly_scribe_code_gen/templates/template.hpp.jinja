{%+ include "header.jinja" +%}

namespace {{ namespace }}
{
    {% for def in structs %}
    {% if def.block_comment %}{% filter indent(width=4,first=True) +%}{{ def.block_comment }}{% endfilter %}{% endif +%}
    struct {{ def.name }} {{ ": public {}".format(def.inheritance) if def.inheritance }}
    {
        {% if def.polymorphic_base %}
        virtual ~{{ def.name }}( ) = default;
        {% endif -%}

        {% filter indent(width=8,first=True) %}
        {% include "members.jinja" %}

        {% include "serialize_func.jinja" %}
        {% endfilter +%}
    }
    {% if not loop.last %}

    {% endif %}
    {% endfor %}
}

{% for def in structs %}
{% if def.polymorphic %}
POLY_SCRIBE_REGISTER_TYPE( {{ def.name }} );
{% endif %}
{% endfor %}